"use strict";(self.webpackChunkicontext_task=self.webpackChunkicontext_task||[]).push([[437],{5437:(U,m,e)=>{e.r(m),e.d(m,{AuthModule:()=>P});var l=e(6895),n=e(433),p=e(7607),t=e(1571),h=e(263),f=e(4617),C=e(7185),i=e(4196),g=e(4144),c=e(3162);function v(o,s){1&o&&t._UZ(0,"mat-progress-bar",11)}function w(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email address "),t.qZA())}function Z(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Email is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function M(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Password is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}const T=function(o){return{visible:o}};let S=(()=>{class o{constructor(a,r,d){this.authService=a,this.localStorage=r,this.toastr=d,this.loading=!1,this.email=new n.NI("",[n.kI.required,n.kI.email]),this.password=new n.NI("",[n.kI.required]),this.matcher=new p.n,this.roles=["user","admin","moderator","guest"]}login(){this.loading=!0,setTimeout(()=>{this.loading=!1,/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^\w\s]).{6,}/.test(this.password.value)?(this.writeData(),this.authService.login(),this.showSuccess()):this.showPasswordError()},2e3)}writeData(){const a=this.roles.length;let r=Math.floor(Math.random()*a);this.localStorage.setUserData(this.email.value),this.localStorage.setUserPassword(this.password.value),this.localStorage.setRole(this.roles[r])}showSuccess(){this.toastr.success("You are logged in","Success!")}showPasswordError(){this.toastr.error("The password must be at least 6 characters long and must contain upper and lower case latin letters, numbers and special characters.","Error!")}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(h.e),t.Y36(f.n),t.Y36(C._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:20,vars:12,consts:[["mode","indeterminate","class","progress-bar",4,"ngIf"],[1,"curtain",3,"ngClass"],[1,"main"],[1,"main-wrapper"],[1,"login-form",3,"ngSubmit"],[1,"login-form__title"],[1,"login-form__control"],["type","email","matInput","","placeholder","example@example.com",3,"formControl","errorStateMatcher"],[4,"ngIf"],["type","password","matInput","",3,"formControl","errorStateMatcher"],["type","submit",1,"login-form__button","button",3,"disabled"],["mode","indeterminate",1,"progress-bar"]],template:function(a,r){1&a&&(t.YNc(0,v,1,0,"mat-progress-bar",0),t._UZ(1,"div",1),t.TgZ(2,"main",2)(3,"div",3)(4,"form",4),t.NdJ("ngSubmit",function(){return[r.login()]}),t.TgZ(5,"h3",5),t._uU(6,"Log In"),t.qZA(),t.TgZ(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Email"),t.qZA(),t._UZ(10,"input",7),t.YNc(11,w,2,0,"mat-error",8),t.YNc(12,Z,4,0,"mat-error",8),t.qZA(),t.TgZ(13,"mat-form-field",6)(14,"mat-label"),t._uU(15,"Password"),t.qZA(),t._UZ(16,"input",9),t.YNc(17,M,4,0,"mat-error",8),t.qZA(),t.TgZ(18,"button",10),t._uU(19," Log In "),t.qZA()()()()),2&a&&(t.Q6J("ngIf",r.loading),t.xp6(1),t.Q6J("ngClass",t.VKq(10,T,r.loading)),t.xp6(9),t.Q6J("formControl",r.email)("errorStateMatcher",r.matcher),t.xp6(1),t.Q6J("ngIf",r.email.hasError("email")&&!r.email.hasError("required")),t.xp6(1),t.Q6J("ngIf",r.email.hasError("required")),t.xp6(4),t.Q6J("formControl",r.password)("errorStateMatcher",r.matcher),t.xp6(1),t.Q6J("ngIf",r.password.hasError("required")),t.xp6(1),t.Q6J("disabled",r.email.invalid||r.password.invalid))},dependencies:[l.mk,l.O5,i.TO,i.KE,i.hX,g.Nt,n._Y,n.Fj,n.JJ,n.JL,n.F,n.oH,c.pW],styles:[".main[_ngcontent-%COMP%]{height:calc(100vh - 50px)}.main-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center}.main-wrapper[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:300px;padding:15px 10px;display:flex;flex-direction:column;align-items:center;gap:15px}.main-wrapper[_ngcontent-%COMP%]   .login-form__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#435261}.main-wrapper[_ngcontent-%COMP%]   .login-form__control[_ngcontent-%COMP%], .main-wrapper[_ngcontent-%COMP%]   .login-form__button[_ngcontent-%COMP%]{width:100%}"]}),o})();var u=e(5896);const I=[{path:"",component:S,canActivate:[e(8042).i]}];let P=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.ez,u.Bz.forChild(I),i.lN,g.c,n.u5,n.UX,c.Cv,u.Bz]}),o})()}}]);